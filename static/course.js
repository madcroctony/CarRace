//ライバルカー(CPU)の走行ライン
let rival_line = [
    [
        [-117.6914629579955, 0, -2460.0193494520677, 1.5707963267948966],
        [5777.708537042041, 0, -2460.0193494520677, 1.2457963267948977],
        [6757.768918300242, 0, -2129.790203118759, 0.6957963267948982],
        [7323.576845001012, 0, -1452.2795536950214, 0.39579632679489796],
        [7425.7457595092355, 0, -1207.7667464471976, 0.020796326794897874],
        [7459.408426756889, 0, 410.6832110225296, -0.4542036732051023],
        [7096.082147671196, 0, 1154.8227308208945, -0.9792036732051027],
        [6155.382476189135, 0, 1786.8456877405833, -1.5542036732051008],
        [5662.450340063862, 0, 1795.0254906096527, -2.1792036732050986],
        [4879.554657226186, 0, 1249.6988363975875, -2.904203673205096],
        [4800.539003347354, 0, 923.1218524533729, -3.704203673205093],
        [5198.2394967220225, 0, 292.44469449571795, -4.354203673205097],
        [5915.81227034476, 0, 23.833908123740716, -3.154203673205095],
        [5921.814956569677, 0, -452.1282413777556, -2.2042036732050985],
        [5049.62569079975, 0, -1092.6173471990126, -1.5792036732051007],
        [3545.6788444588556, 0, -1105.2618472392, -0.8042036732051026],
        [2767.7780952856315, 0, -356.0820127296678, -0.1042036732051021],
        [2565.1981022699697, 0, 1580.9536365111444, 0.09579632679489791],
        [2617.7481433458543, 0, 2127.8346593880797, 1.0207963267948985],
        [3589.5408460414833, 0, 2723.645831646136, 0.420796326794898],
        [4093.0016169312075, 0, 3848.627388017225, 1.195796326794898],
        [4643.303824530149, 0, 4065.2409617187054, 2.2207963267948942],
        [5274.996318678825, 0, 3585.0255487671616, 2.4457963267948934],
        [5933.300092012562, 0, 2796.758371970766, 1.8207963267948957],
        [6339.952635404517, 0, 2692.9229302716444, 1.0207963267948985],
        [7107.224705258072, 0, 3163.3414363092356, 0.470796326794898],
        [7371.263007539906, 0, 3682.1132406009947, 0.12079632679489788],
        [7479.450393877927, 0, 4573.37096395453, -0.07920367320510212],
        [7322.648616440747, 0, 6548.958077344517, -0.8542036732051026],
        [6619.121727425266, 0, 7161.770378487533, -2.054203673205099],
        [6209.262505859787, 0, 6946.615019507703, -2.9792036732050957],
        [6059.404820921549, 0, 6031.909447061059, -2.2542036732050983],
        [5313.057590990779, 0, 5424.149574763895, -1.4292036732051012],
        [4356.4278415257695, 0, 5560.513838552148, -0.2792036732051021],
        [3990.9951742364665, 0, 6835.164757697392, -1.179203673205102],
        [2621.0866188652963, 0, 7400.824514018153, -1.6042036732051006],
        [118.88356132063126, 0, 7317.201438171144, -2.104203673205099],
        [-937.6610318521614, 0, 6693.308400353499, -3.1042036732050953],
        [-964.7168711050714, 0, 5970.014254405725, -3.9542036732050923],
        [-276.8239445939277, 0, 5318.5773183513365, -4.704203673205102],
        [1214.5260943415888, 0, 5306.369887539557, -3.729203673205093],
        [1538.2807066702132, 0, 4820.325701280797, -2.4792036732050975],
        [898.9857362718757, 0, 4000.6536993047675, -1.5542036732051008],
        [-1151.9319059596774, 0, 4034.686988645613, -1.8792036732050996],
        [-1918.950568708092, 0, 3790.3360709153308, -2.679203673205097],
        [-2477.273671084202, 0, 2670.167390156442, -3.204203673205095],
        [-2383.6687711035443, 0, 1177.09869692776, -3.779203673205093],
        [-1733.268522171204, 0, 299.1725746436895, -4.379203673205097],
        [-1020.828974230134, 0, 52.60594971338803, -5.029203673205107],
        [90.94315836134199, 0, 417.1093450240437, -5.679203673205116],
        [299.0305754543158, 0, 718.6861790938616, -6.629203673205129],
        [76.13800081572364, 0, 1336.9343009438016, -7.429203673205141],
        [-779.4133150940006, 0, 1723.9135585857787, -6.829203673205132],
        [-1032.2030319180144, 0, 2139.9323070431465, -5.554203673205114],
        [-319.93115013974926, 0, 2937.4730623829896, -4.854203673205104],
        [590.9320929512274, 0, 3067.5198323766535, -4.054203673205093],
        [1514.3872655480313, 0, 2353.503141952542, -3.454203673205094],
        [1778.598449446195, 0, 1536.0404453705337, -3.1042036732050953],
        [1717.1789282021264, 0, -105.91121421330968, -2.604203673205097],
        [1425.552490570707, 0, -595.3109596917958, -2.1292036732050987],
        [696.1864632997557, 0, -1050.9700408730973, -1.5292036732051009],
        [-1600.8252471785095, 0, -955.3760979389565, -1.9292036732050994],
        [-2158.859787135096, 0, -1164.407823319198, -2.8042036732050963],
        [-2272.53356858574, 0, -1488.4476841553483, -3.9042036732050924],
        [-1460.8298731748941, 0, -2338.0135208368674, -4.354203673205097],
        [-1164.603994426693, 0, -2448.900484722872, -4.629203673205101],
        [-871.8199263212731, 0, -2473.3121512706484, 1.5707963267948966]
    ],

    [
        [-117.6914629579955, 0, -2460.0193494520677, 1.5707963267948966],
        [5752.508537042028, 0, -2460.0193494520677, 1.170796326794898],
        [6447.817481414805, 0, -2166.0474428432685, 1.0207963267948985],
        [6853.022386749689, 0, -1917.614202932527, 0.8457963267948984],
        [7242.092386287701, 0, -1572.9163998361191, 0.5957963267948981],
        [7427.221727153624, 0, -1299.8575469297402, 0.3207963267948979],
        [7464.145975790112, 0, -1188.7314480032007, 0.17079632679489787],
        [7477.369419507751, 0, -1112.0634590101013, -0.05420367320510212],
        [7417.40074874644, 0, -6.789118166563994, -0.2542036732051021],
        [7253.942159604517, 0, 622.3223899428734, -0.5292036732051023],
        [6915.695269522616, 0, 1200.6726655976186, -0.7042036732051025],
        [6731.6317357691205, 0, 1417.3454731720228, -1.0042036732051027],
        [6392.534720575905, 0, 1633.0694270738866, -1.229203673205102],
        [5926.699995349328, 0, 1798.6875685109678, -1.504203673205101],
        [5643.030138191326, 0, 1817.6058702305804, -2.004203673205099],
        [5332.3791781706705, 0, 1673.8516666807702, -2.279203673205098],
        [5010.77367662593, 0, 1398.3119211336755, -2.604203673205097],
        [4892.065284688547, 0, 1199.0986492775044, -2.7792036732050964],
        [4833.571288955606, 0, 1044.8149739803598, -3.2542036732050947],
        [4867.170864559405, 0, 747.7088169939315, -3.729203673205093],
        [4976.160859052228, 0, 584.0850378527111, -4.154203673205094],
        [5687.985115306343, 0, 139.60459035443583, -3.6292036732050934],
        [5871.737353790344, 0, -206.88632561900988, -2.929203673205096],
        [5810.0374232969525, 0, -493.00939105958327, -2.379203673205098],
        [5590.203179261742, 0, -723.2001709563187, -2.054203673205099],
        [4766.5003626223715, 0, -1155.602483462119, -1.6542036732051004],
        [3884.875913043894, 0, -1229.3074351645043, -0.9542036732051027],
        [3336.6223500658757, 0, -840.7176377149281, -0.7042036732051025],
        [3020.030482301329, 0, -468.03736017752664, -0.5042036732051023],
        [2617.551239624585, 0, 261.3912307169852, -0.20420367320510208],
        [2507.0929194515184, 0, 794.7738790141935, -0.0042036732051021],
        [2504.223920938669, 0, 1477.2678488392257, 0.22079632679489788],
        [2595.440206112922, 0, 1883.6566273740282, 0.6207963267948982],
        [3057.0057376025134, 0, 2529.1018304243944, 0.9957963267948985],
        [3613.0545571864395, 0, 2889.4467627313743, 0.5957963267948981],
        [3851.550979944909, 0, 3241.2200652024576, 0.37079632679489793],
        [4068.965632630914, 0, 3800.4435167827924, 0.8957963267948984],
        [4325.505936773035, 0, 4005.7847750595156, 1.470796326794897],
        [4555.25239853573, 0, 4028.836310963268, 1.9707963267948951],
        [5011.54601496476, 0, 3835.9184641835627, 2.4957963267948933],
        [5531.049635108993, 0, 3146.5490213903486, 2.1957963267948943],
        [6069.7724353963085, 0, 2757.8689029760044, 1.5457963267948966],
        [6423.961722412791, 0, 2766.725480348587, 1.0207963267948985],
        [6831.638948861646, 0, 3016.6745132232268, 0.5957963267948981],
        [7047.127481424594, 0, 3334.5120382794526, 0.420796326794898],
        [7362.724878251695, 0, 4039.7134585247295, 0.19579632679489786],
        [7470.932313435171, 0, 4585.286176841007, 0.020796326794897887],
        [7495.852835074397, 0, 5783.427039845528, -0.1792036732051021],
        [7367.693921062415, 0, 6490.912935647889, -0.5292036732051023],
        [7114.261176553295, 0, 6924.244037705625, -0.8792036732051026],
        [6899.520702924905, 0, 7102.052836660729, -1.204203673205102],
        [6708.142116503108, 0, 7175.532334884333, -1.7542036732051],
        [6393.705812662155, 0, 7117.2069473859465, -2.4042036732050978],
        [6119.38396919633, 0, 6815.194487051093, -2.929203673205096],
        [5869.169355271984, 0, 5654.8662373826255, -2.2292036732050984],
        [5470.52162846712, 0, 5346.489860347497, -1.4542036732051011],
        [4441.455946799045, 0, 5467.018001513862, -0.5292036732051023],
        [4208.772377188977, 0, 5864.871198602328, -0.0292036732051021],
        [4193.9185801943095, 0, 6373.3542904695405, -0.6292036732051024],
        [3787.20545805914, 0, 6932.1061551492585, -1.0792036732051025],
        [3061.046203314197, 0, 7320.917712009736, -1.4292036732051012],
        [2110.851405077092, 0, 7456.364695745596, -1.5542036732051008],
        [105.42749954675654, 0, 7489.643053990004, -1.9542036732050994],
        [-296.59840314305063, 0, 7327.4782502672315, -2.4542036732050976],
        [-805.8651794742626, 0, 6707.144380060861, -2.654203673205097],
        [-928.2841576934647, 0, 6476.182145546718, -2.954203673205096],
        [-975.230301588195, 0, 6228.59365717657, -3.479203673205094],
        [-806.7316063637628, 0, 5748.610449441483, -3.979203673205092],
        [-606.5548951674141, 0, 5568.317231891256, -4.254203673205096],
        [-305.2110603889549, 0, 5419.697269433271, -4.804203673205103],
        [644.8702620655838, 0, 5507.174642067751, -4.279203673205096],
        [1235.7395267586473, 0, 5233.908266453998, -3.8792036732050925],
        [1568.9068275925326, 0, 4867.273966837798, -2.8042036732050963],
        [1457.186090144681, 0, 4548.801476936224, -2.2042036732050985],
        [879.1924458570793, 0, 4124.353886339771, -1.8792036732050996],
        [123.13119257649899, 0, 3883.4936960056343, -1.3292036732051016],
        [-1168.825741971547, 0, 4201.838853457775, -1.9292036732050994],
        [-1622.5390069639382, 0, 4031.884379642157, -2.354203673205098],
        [-1998.7594626350367, 0, 3657.158921827197, -2.654203673205097],
        [-2434.4380220739217, 0, 2835.1842976171406, -3.0292036732050955],
        [-2483.8412101888157, 0, 2397.463410516602, -3.154203673205095],
        [-2472.3667475920756, 0, 1487.6357638119584, -3.6042036732050935],
        [-2154.2093144256023, 0, 849.6684780355486, -3.9542036732050923],
        [-1748.6182348930645, 0, 465.5723491776411, -4.204203673205095],
        [-1092.0860700379328, 0, 99.89794959430843, -4.429203673205098],
        [-824.3905941198109, 0, 21.996908696446567, -4.629203673205101],
        [-561.4031347153841, 0, 0.0696152929085985, -5.204203673205109],
        [-58.96103675128356, 0, 269.238592319297, -5.529203673205114],
        [232.72429781999264, 0, 579.8523003169355, -6.154203673205123],
        [274.5915083259471, 0, 902.6485002395027, -6.70420367320513],
        [172.70506634208712, 0, 1130.1779333682073, -7.179203673205137],
        [-18.055534162802463, 0, 1282.7979952703492, -7.454203673205141],
        [-571.7572588118915, 0, 1516.7544230953263, -7.029203673205135],
        [-831.2998049070728, 0, 1797.5878733223744, -6.404203673205126],
        [-871.4644094295298, 0, 2127.8545754640754, -5.779203673205117],
        [-609.9654270228467, 0, 2602.028100874624, -5.354203673205111],
        [-318.7179323196878, 0, 2819.6972462056356, -4.904203673205105],
        [589.3174728687651, 0, 2996.0398188426484, -4.229203673205095],
        [1060.413855881544, 0, 2748.8714593945256, -3.9292036732050923],
        [1520.3405393965666, 0, 2290.9757880993366, -3.454203673205094],
        [1846.9524324239817, 0, 1280.4468813712585, -3.154203673205095],
        [1859.7220124058097, 0, 267.927401150218, -2.7042036732050967],
        [1585.7108975702588, 0, -318.07389487785184, -2.354203673205098],
        [1059.0022596307213, 0, -842.6895358187935, -2.004203673205099],
        [414.64882225219486, 0, -1140.8650675756357, -1.4542036732051011],
        [52.12689019076501, 0, -1098.4051008487572, -1.229203673205102],
        [-772.5061023624428, 0, -805.22347183231, -1.6542036732051004],
        [-1605.201242034391, 0, -874.837869529286, -2.029203673205099],
        [-1771.8189557892756, 0, -957.0581678934687, -2.4542036732050976],
        [-1987.936902485527, 0, -1220.3097455065874, -2.929203673205096],
        [-2055.560194942924, 0, -1533.9014072535506, -3.3542036732050944],
        [-1990.9058594592223, 0, -1833.4022868902568, -3.6042036732050935],
        [-1853.6728524474524, 0, -2108.581050217857, -3.9292036732050923],
        [-1561.3465705523088, 0, -2399.6164345156535, -4.1042036732050935],
        [-1432.6629671565286, 0, -2489.2086786949103, -4.479203673205099],
        [-1392.9672078020099, 0, -2498.6366524575174, -4.654203673205101],
        [-1243.22105092163, 0, -2507.3595246654913, -4.754203673205103],
        [-1008.5263786311084, 0, -2497.5401153938187, -4.729203673205102],
        [-192.64173134224285, 0, -2483.8199725985905, -4.729203673205102]       
    ]
];

//スタートライン・ゴールライン
let control_line = [
    /*
    [-117.6914629579955, 0, -2487.919349452064, 1.5707963267948966],
    [107.00853704200424,, 0, -2487.919349452064, 1.5707963267948966],
    [107.00853704200424,, 0, -1915.7193494520668, 80.11061266653972],
    */
    (-117 + 107)/2, (-2487 - 1915)/2, Math.abs(-117 - 107), Math.abs(-2487 - (-1915)),
    (-117 + 107)/2 - Math.abs(-117 - 107) / 2, (-117 + 107)/2 + Math.abs(-117 - 107)/2,
    (-2487 - 1915)/2 - Math.abs(-2487 - (-1915)) / 2, (-2487 - 1915)/2 + Math.abs(-2487 - (-1915)) / 2
];

let course_range = [
    -2700, 7900, -2700, 7900
];

//中継地点の座標
let check_point = [
    [
        [-117.69146295798525, 0, -1672.2193494520677, 64.40264939859081],
        [-117.6914629579188, 0, -2689.319349452069, 109.95574287564266]
    ],

    [
        [1500.380735574538, 0, -2675.713638466675, 0],
        [1500.380735574538, 0, -1672.1136384666772, 1.5707963267948966]
    ],

    [
        [3028.380735574538, 0, -2675.713638466675, 0],
        [3028.380735574538, 0, -1672.1136384666772, 1.5707963267948966]
    ],

    [
        [5999.708537041972, 0, -1672.119349452067, 69.11503837897548],
        [5999.70853704206, 0, -2677.9193494520628, 109.95574287564266]
    ],

    [
        [6629.008537043713, 0, -1317.5193494524199, 425.6858045614158],
        [7880.908537043709, 0, -1317.5193494509078, 435.11058252218515]
    ],

    [
        [6629.008537041139, 0, 547.5806505475807, 519.9335841691096],
        [7879.508537041139, 0, 547.5806505481291, 541.9247327442389]
    ],

    [
        [6471.108537041952, 0, 1065.0806505502044, 639.3141050055257],
        [6471.108537044826, 0, 2018.5806505502037, 647.1680866395004]
    ],

    [
        [5429.508537044826, 0, 2018.5806505545704, 683.2964021557842],
        [5429.508537040244, 0, 1055.9806505545707, 700.5751617505287]
    ],

    [
        [5114.508537039466, 0, 922.4806505559501, 768.1194038027114],
        [4190.508537039458, 0, 922.4806505626775, 777.5441817634811]
    ],

    [
        [5276.908537037922, 0, 714.1806505512025, 917.3450548482315],
        [5276.908537025971, 0, -113.01934944879653, 995.8848711879789]
    ],

    [
        [5535.908537023584, 0, -289.9193494527142, 1079.1370765081072],
        [6408.308537023588, 0, -289.919349462928, 1176.526448769387]
    ],

    [
        [5381.8085370191275, 0, -1409.9193494579115, 1366.5928043115618],
        [5381.808537014006, 0, -564.0193494579124, 1564.513141487711]
    ],

    [
        [3410.608537014016, 0, -564.0193494775199, 1702.7432182456564],
        [3410.6085370291376, 0, -1387.2193494775192, 1875.5308141930882]
    ],

    [
        [2414.1085369988255, 0, 110.38065050317276, 1971.349390127573],
        [3279.9085369988256, 0, 110.38065051857308, 2119.0042448462978]
    ],

    [
        [2393.1085369656676, 0, 2165.680650506014, 2153.561764035789],
        [3250.608536965666, 0, 2165.680650517303, 2162.9865419965595]
    ],

    [
        [3415.208536963586, 0, 2349.480650518712, 2206.968839146821],
        [3415.208536958481, 0, 3294.180650518718, 2236.8139693559274]
    ],

    [
        [3621.60853695854, 0, 3399.7806505206904, 2386.0396204014583],
        [4546.308536958536, 0, 3399.78065050476, 2452.013066126851]
    ],

    [
        [4699.608536961635, 0, 3574.7806505019194, 2477.145807355572],
        [4699.608536985063, 0, 4512.780650501918, 2525.8404934862187]
    ],

    [
        [5797.508536951614, 0, 3461.5806504630837, 2634.225440035078],
        [4871.708536951615, 0, 3461.5806504976763, 2643.6502179958484]
    ],

    [
        [6115.808536949538, 0, 3314.8806504425493, 2726.9024233159867],
        [6115.808536891987, 0, 2328.3806504425474, 2843.141351498821],
    ],

    [
        [7877.008537041963, 0, 4062.480650547901, 1.5707963267948966],
        [6796.908537041966, 0, 4062.480650547901, 4.71238898038469]
    ],

    [
        [6796.908537041966, 0, 6576.780650547896, 4.71238898038469],
        [7883.2085370419645, 0, 6576.780650547896, 1.5707963267948966]
    ],

    [
        [6607.308537041958, 0, 6737.880650547885, 4.71238898038469],
        [6607.308537041958, 0, 7877.780650547886, 0]
    ],

    [
        [6336.708537041961, 0, 6289.28065054788, 1.5707963267948966],
        [5446.2085370419645, 0, 6289.28065054788, 4.71238898038469]
    ],

    [
        [5057.708537041957, 0, 5795.280650547879, 4.71238898038469],
        [5057.708537041957, 0, 4875.780650547876, 3.141592653589793]
    ],

    [
        [3620.50853704196, 0, 6373.080650547877, 4.71238898038469],
        [4475.008537041957, 0, 6373.080650547877, 1.5707963267948966]
    ],

    [
        [3313.5085370419574, 0, 7885.780650547874, 4.71238898038469],
        [3313.5085370419574, 0, 6753.680650547876, 3.141592653589793]
    ],

    [
        [78.80853704197703, 0, 6753.680650547876, 4.71238898038469],
        [78.80853704197703, 0, 7889.280650547876, 0],
    ],

    [
        [-317.9914629580214, 0, 6533.4806505478755, 1.5707963267948966],
        [-1312.7914629580205, 0, 6533.4806505478755, 4.71238898038469]
    ],

    [
        [430.3085370419763, 0, 5761.080650547874, 0],
        [430.3085370419763, 0, 4918.4806505478655, 3.141592653589793]
    ],

    [
        [1957.2085370419775, 0, 4722.480650547867, 1.5707963267948966],
        [1189.408537041977, 0, 4722.480650547867, 4.71238898038469]
    ],

    [
        [812.7085370419767, 0, 4423.880650547869, 4.71238898038469],
        [812.7085370419767, 0, 3593.1806505478694, 3.141592653589793]
    ],

    [
        [-1458.0914629580113, 0, 3593.1806505478694, 4.71238898038469],
        [-1458.0914629580113, 0, 4436.0806505478695, 0]
    ],

    [
        [-2682.2914629580105, 0, 3225.38065054787, 3.141592653589793],
        [-1742.1914629580087, 0, 3225.38065054787, 1.5707963267948966]
    ],

    [
        [-1742.1914629580087, 0, 1310.5806505478772, 3.141592653589793],
        [-2685.791462958008, 0, 1310.5806505478772, 4.71238898038469]
    ],

    [
        [-993.1914629580122, 0, -67.41934945212073, 3.141592653589793],
        [-993.1914629580122, 0, 767.480650547878, 0]
    ],

    [
        [-90.69146295801313, 0, 941.680650547878, 0],
        [688.2085370419867, 0, 941.680650547878, 1.5707963267948966]
    ],

    [
        [-326.6914629580125, 0, 1973.3806505478772, 0],
        [-326.6914629580125, 0, 1135.080650547877, 3.141592653589793]
    ],

    [
        [-528.5914629580114, 0, 2184.8806505478765, 1.5707963267948966],
        [-1391.19146295801, 0, 2184.8806505478765, 4.71238898038469]
    ],

    [
        [27.40853704198828, 0, 3264.3806505478765, 0],
        [27.40853704198828, 0, 2421.5806505478768, 3.141592653589793]
    ],

    [
        [842.508537041987, 0, 2421.5806505478768, 1.5707963267948966],
        [842.508537041987, 0, 3269.980650547878, 0]
    ],

    [
        [1983.3085370419856, 0, 1853.0806505478783, 1.5707963267948966],
        [1132.3085370419856, 0, 1853.0806505478783, 4.71238898038469]
    ],

    [
        [1132.3085370419856, 0, 82.48065054788522, 3.141592653589793],
        [1975.6085370419844, 0, 82.48065054788522, 1.5707963267948966]
    ],

    [
        [1024.1085370419867, 0, -1392.3193494521108, 3.141592653589793],
        [1024.1085370419867, 0, -544.1193494521121, 0]
    ],

    [
        [-799.8914629580082, 0, -544.1193494521121, 4.71238898038469],
        [-799.8914629580082, 0, -1380.3193494521122, 3.141592653589793]
    ],

    [
        [-1602.2914629580084, 0, -1505.0193494521131, 1.5707963267948966],
        [-2683.7914629580096, 0, -1505.0193494521131, 4.71238898038469]
    ],

    [
        [-1452.2914629580116, 0, -2655.1193494521112, 1.5707963267948966],
        [-1452.2914629580116, 0, -1698.019349452113, 0]
    ]
];